{"version":3,"sources":["components/Alert.js","components/Filter.js","components/PersonForm.js","components/Person.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Alert","name","window","alert","Filter","filter","handleFilter","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Person","person","deletePerson","number","onClick","id","Persons","persons","map","Notification","notification","className","text","baseUrl","exportObject","getAll","axios","get","then","response","data","create","personObject","post","update","console","log","put","remove","delete","App","useState","setPersons","setNewName","setNewNumber","setFilter","setNotification","useEffect","personService","initialPersons","catch","error","personsAfterFilter","toLowerCase","includes","event","target","preventDefault","checkPerson","find","confirm","personUpdate","returnedPerson","setTimeout","concat","p","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4aaa7619.chunk.js","sourcesContent":["const Alert = ({ name }) => ( \r\n  window.alert(`${name} is already added to phonebook`)\r\n)\r\n\r\nexport default Alert;","import React from 'react';\r\n\r\nconst Filter = ({ filter, handleFilter }) => (\r\n  <div>\r\n    <form>\r\n      <div>\r\n        filter shown with <input \r\n          value={filter} \r\n          onChange={handleFilter}\r\n        />\r\n      </div>\r\n    </form>\r\n  </div>\r\n)\r\n\r\nexport default Filter;\r\n","import React from 'react';\r\n\r\nconst PersonForm = ({ addPerson, newName, handleNameChange, newNumber, handleNumberChange }) => (\r\n  <div>\r\n    <form onSubmit={addPerson}>\r\n      <div>\r\n        name: <input \r\n          value={newName}\r\n          onChange={handleNameChange}\r\n        />\r\n      </div>\r\n      <div>\r\n        number: <input \r\n          value={newNumber}\r\n          onChange={handleNumberChange}\r\n        />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  </div>\r\n)\r\n\r\nexport default PersonForm;","import React from 'react';\r\n\r\nconst Person = ({ person, deletePerson }) => (\r\n  <li>\r\n    {person.name} {person.number}\r\n    <button onClick={() => deletePerson(person.id)}>Delete</button>\r\n  </li>\r\n)\r\n\r\nexport default Person;\r\n","import React from 'react';\r\nimport Person from './Person';\r\n\r\nconst Persons = ({ persons, deletePerson }) => {\r\n  return (\r\n    <div>\r\n      <ul>\r\n        {persons\r\n          .map(person => \r\n            <Person\r\n              key={person.id}\r\n              person={person}\r\n              deletePerson={deletePerson}\r\n            />\r\n        )}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Persons;\r\n","import React from 'react'\r\n\r\nconst Notification = ({ notification }) => {\r\n    if (notification === null) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className={notification.type}>\r\n            {notification.text}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification\r\n","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons' // 'http://localhost:3001/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => {\r\n      return response.data\r\n    })\r\n  }\r\n\r\nconst create = personObject => {\r\n    const request = axios.post(baseUrl, personObject)\r\n    return request.then(response => {\r\n        return response.data\r\n    })\r\n}\r\n\r\nconst update = (id, personObject) => {\r\n    console.log(`update ${id} ${personObject.name}`)\r\n    const request = axios.put(`${baseUrl}/${id}`, personObject)\r\n    return request.then(response => {\r\n        return response.data\r\n    })\r\n}\r\n\r\nconst remove = id => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => {\r\n        return response.data\r\n    })\r\n}\r\n\r\nconst exportObject = { getAll, create, update, remove }\r\n\r\nexport default exportObject\r\n","import React, { useEffect, useState } from 'react'\r\n\r\nimport Alert from './components/Alert'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport Persons from './components/Persons'\r\nimport Notification from './components/Notification'\r\n\r\nimport personService from './services/persons'\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([]) \r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ filter, setFilter ] = useState('')\r\n  const [ notification, setNotification ] = useState(null)\r\n\r\n  const getAllHook = () => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        setPersons(initialPersons)\r\n      })\r\n      .catch(error => \r\n        console.error(error)\r\n      )\r\n  }\r\n\r\n  useEffect(getAllHook, [])\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n\r\n    const checkPerson = persons.find(person => \r\n      person.name.toLowerCase() === personObject.name.toLowerCase())\r\n\r\n    if (checkPerson && checkPerson.number === newNumber) {\r\n      Alert(personObject)      \r\n    } \r\n    if (checkPerson && checkPerson.number !== newNumber) {\r\n      const confirmNewNumber = window.confirm(`Are you sure you want update ${checkPerson.name}'s number with a new one?`)\r\n      \r\n      if (confirmNewNumber) {\r\n        const personUpdate = { ...checkPerson, number: newNumber }\r\n        personService\r\n          .update(checkPerson.id, personUpdate)\r\n          .then(returnedPerson =>{\r\n            setPersons(\r\n              persons\r\n                .map(person =>\r\n                  person.id !== checkPerson.id \r\n                    ? person \r\n                    : returnedPerson\r\n              )\r\n            )\r\n            setNotification({\r\n              text: `${checkPerson.name}'s number was updated.`,\r\n              type: 'notification'\r\n            })\r\n            setTimeout(() => setNotification(null), 5000)      \r\n          })\r\n          .catch(error =>\r\n            setPersons(persons\r\n              .filter(person => \r\n                person.name !== checkPerson.name\r\n              )\r\n            )\r\n          )\r\n            setNotification({\r\n              text: `${checkPerson.name} has already been deleted from the server.`,\r\n              type: 'error'\r\n            })\r\n            setTimeout(() => {\r\n              setNotification(null)\r\n            }, 5000)\r\n      }\r\n    } \r\n    if (!checkPerson) {\r\n      personService\r\n        .create(personObject)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(returnedPerson))\r\n        })\r\n        .catch(error => {\r\n          setNotification({\r\n            text: error.response.data.error, \r\n            type: 'error'\r\n          })\r\n          setTimeout(() => {\r\n            setNotification(null)\r\n          }, 5000)\r\n        })\r\n      setNotification({\r\n        text: `${personObject.name} added to the phonebook.`,\r\n        type: 'notification'\r\n      })\r\n      setTimeout(() => {\r\n        setNotification(null)\r\n      }, 5000)\r\n    }\r\n    setNewName('')\r\n    setNewNumber('')\r\n  }\r\n\r\n  const deletePerson = (id) => {\r\n    const person = persons.find(p => p.id === id)\r\n    const confirmDelete = window.confirm(`Are you sure you want to delete ${person.name}?`)\r\n    \r\n    if (confirmDelete) {\r\n      personService\r\n        .remove(id)\r\n        .then(returnedPerson => {\r\n          persons.map(person => person.id !== id ? person : returnedPerson)\r\n        })\r\n      setPersons(persons.filter(person => person.id !== id))\r\n      setNotification({\r\n        text: `${person.name} was deleted from the phonebook.`,\r\n        type: 'notification'\r\n      })\r\n      setTimeout(() => {\r\n        setNotification(null)\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilter = (event) => {\r\n    setFilter(event.target.value)\r\n  }\r\n\r\n  const personsAfterFilter = \r\n    filter === ''  ? persons : persons.filter(person => \r\n      person.name.toLowerCase().includes(filter.toLowerCase()))\r\n\r\n      return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification notification={notification} />\r\n      <Filter\r\n        filter={filter}\r\n        handleFilter={handleFilter}\r\n      />\r\n      <h3>Add a new</h3>\r\n      <PersonForm\r\n        addPerson={addPerson}\r\n        newName={newName}\r\n        handleNameChange={handleNameChange}\r\n        newNumber={newNumber}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <h3>Numbers</h3>\r\n      <Persons\r\n        persons={personsAfterFilter}\r\n        deletePerson={deletePerson}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css';\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}