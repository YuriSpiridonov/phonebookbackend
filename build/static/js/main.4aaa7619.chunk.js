(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(15),c=t.n(r),o=t(6),a=t(3),u=t(1),i=function(e){var n=e.name;return window.alert("".concat(n," is already added to phonebook"))},s=t(0),d=function(e){var n=e.filter,t=e.handleFilter;return Object(s.jsx)("div",{children:Object(s.jsx)("form",{children:Object(s.jsxs)("div",{children:["filter shown with ",Object(s.jsx)("input",{value:n,onChange:t})]})})})},l=function(e){var n=e.addPerson,t=e.newName,r=e.handleNameChange,c=e.newNumber,o=e.handleNumberChange;return Object(s.jsx)("div",{children:Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:t,onChange:r})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:c,onChange:o})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})})},f=function(e){var n=e.person,t=e.deletePerson;return Object(s.jsxs)("li",{children:[n.name," ",n.number,Object(s.jsx)("button",{onClick:function(){return t(n.id)},children:"Delete"})]})},j=function(e){var n=e.persons,t=e.deletePerson;return Object(s.jsx)("div",{children:Object(s.jsx)("ul",{children:n.map((function(e){return Object(s.jsx)(f,{person:e,deletePerson:t},e.id)}))})})},b=function(e){var n=e.notification;return null===n?null:Object(s.jsx)("div",{className:n.type,children:n.text})},h=t(4),m=t.n(h),O="/api/persons",p={getAll:function(){return m.a.get(O).then((function(e){return e.data}))},create:function(e){return m.a.post(O,e).then((function(e){return e.data}))},update:function(e,n){return console.log("update ".concat(e," ").concat(n.name)),m.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return m.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))}},x=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(u.useState)(""),f=Object(a.a)(c,2),h=f[0],m=f[1],O=Object(u.useState)(""),x=Object(a.a)(O,2),v=x[0],w=x[1],g=Object(u.useState)(""),y=Object(a.a)(g,2),C=y[0],N=y[1],k=Object(u.useState)(null),P=Object(a.a)(k,2),S=P[0],A=P[1];Object(u.useEffect)((function(){p.getAll().then((function(e){r(e)})).catch((function(e){return console.error(e)}))}),[]);var T=""===C?t:t.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())}));return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(b,{notification:S}),Object(s.jsx)(d,{filter:C,handleFilter:function(e){N(e.target.value)}}),Object(s.jsx)("h3",{children:"Add a new"}),Object(s.jsx)(l,{addPerson:function(e){e.preventDefault();var n={name:h,number:v},c=t.find((function(e){return e.name.toLowerCase()===n.name.toLowerCase()}));if((c&&c.number===v&&i(n),c&&c.number!==v)&&window.confirm("Are you sure you want update ".concat(c.name,"'s number with a new one?"))){var a=Object(o.a)(Object(o.a)({},c),{},{number:v});p.update(c.id,a).then((function(e){r(t.map((function(n){return n.id!==c.id?n:e}))),A({text:"".concat(c.name,"'s number was updated."),type:"notification"}),setTimeout((function(){return A(null)}),5e3)})).catch((function(e){return r(t.filter((function(e){return e.name!==c.name})))})),A({text:"".concat(c.name," has already been deleted from the server."),type:"error"}),setTimeout((function(){A(null)}),5e3)}c||(p.create(n).then((function(e){r(t.concat(e))})).catch((function(e){A({text:e.response.data.error,type:"error"}),setTimeout((function(){A(null)}),5e3)})),A({text:"".concat(n.name," added to the phonebook."),type:"notification"}),setTimeout((function(){A(null)}),5e3)),m(""),w("")},newName:h,handleNameChange:function(e){m(e.target.value)},newNumber:v,handleNumberChange:function(e){w(e.target.value)}}),Object(s.jsx)("h3",{children:"Numbers"}),Object(s.jsx)(j,{persons:T,deletePerson:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Are you sure you want to delete ".concat(n.name,"?"))&&(p.remove(e).then((function(n){t.map((function(t){return t.id!==e?t:n}))})),r(t.filter((function(n){return n.id!==e}))),A({text:"".concat(n.name," was deleted from the phonebook."),type:"notification"}),setTimeout((function(){A(null)}),5e3))}})]})};t(39);c.a.render(Object(s.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.4aaa7619.chunk.js.map